function t(t){const e="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xlink",a=document.createElementNS(e,"svg");a.setAttribute("aria-hidden","true");const s=document.createElementNS(e,"use");return t.includes("folder")?(a.classList.add("icon","icon-folder"),s.setAttributeNS(n,"href","#icon-folder")):t.includes("delete")?(a.classList.add("icon","icon-delete"),s.setAttributeNS(n,"href","#icon-delete")):(a.classList.add("icon","icon-document"),s.setAttributeNS(n,"href","#icon-document")),a.appendChild(s),a}!function(t){var e,n,a,s,o,r='<svg><symbol id="icon-finish" viewBox="0 0 1024 1024"><path d="M828.256874 193.254445c-84.71645-84.71952-197.355857-131.374096-317.163523-131.374096S278.646278 108.535949 193.929828 193.254445C109.212354 277.971919 62.556755 390.609279 62.556755 510.417969c0 87.284949 25.098631 171.905208 72.581062 244.714468 9.41237 14.433734 28.744671 18.502399 43.179428 9.092076 14.432711-9.41237 18.504446-28.744671 9.091052-43.178405-40.854477-62.645782-62.448284-135.479601-62.448284-210.628138 0-212.914204 173.220157-386.135384 386.135384-386.135384S897.230782 297.502741 897.230782 510.417969 724.009601 896.55233 511.093351 896.55233c-70.50375 0-139.479705-19.171642-199.470007-55.43966-14.745842-8.91709-33.92874-4.190439-42.844807 10.556427-8.915044 14.747889-4.189416 33.929764 10.558473 42.843784 69.730131 42.158169 149.870356 64.442708 231.756341 64.442708 119.80869 0 232.447073-46.6556 317.163523-131.374096 84.717474-84.71645 131.373073-197.355857 131.373073-317.1625C959.628924 390.610302 912.974347 277.971919 828.256874 193.254445L828.256874 193.254445z"  ></path><path d="M438.159248 712.514803c10.113335 0 20.228717-3.859911 27.945469-11.57564l297.673633-297.673633c15.432481-15.432481 15.432481-40.456411 0-55.889915-15.434527-15.434527-40.458457-15.434527-55.892985 0L438.159248 617.102756 317.2679 496.212432c-15.432481-15.437597-40.458457-15.437597-55.891961 0-15.434527 15.434527-15.434527 40.457434 0 55.889915l148.835793 148.836817C417.929508 708.655915 428.04489 712.514803 438.159248 712.514803L438.159248 712.514803z"  ></path></symbol><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M312.96 565.824l408.192-408.192 135.232 135.232-408.128 408.128L312.96 565.824zM268.48 610.304l137.216 137.216-207.488 67.84 70.272-205.056zM944.32 212.672c45.312-45.312 24.832-75.712-20.48-121.024s-74.432-64.512-119.744-19.2l-37.184 39.68 137.344 137.92 40.064-37.376z"  ></path><path d="M640 64V0H0v1022.016h1024v-640h-64v576H64V64h576z"  ></path></symbol><symbol id="icon-folder" viewBox="0 0 1024 1024"><path d="M864.79872 381.81376h-4.77696V307.61472c0-31.29856-25.4976-56.82688-56.82688-56.82688H493.824v-39.4752c0-31.29856-25.4976-56.80128-56.80128-56.80128H154.10688C122.7776 154.51136 97.28 180.01408 97.28 211.31264v601.40032c0 31.32416 25.4976 56.77568 56.82688 56.77568h649.09312c31.32416 0 56.82688-25.45152 56.72448-55.72608L921.6 438.61504c0-31.30368-25.4976-56.80128-56.80128-56.80128zM152.87296 241.70496c0-24.5248 7.07584-31.62624 31.60064-31.62624h222.1824c24.448 0 31.54944 7.10144 31.54944 31.62624V300.0832l1.57696 6.2976h333.10208c24.4736 0 31.54944 7.10144 31.54944 31.54944v43.8784h-583.68c-31.29856 0-56.80128 25.4976-56.75008 55.82336l-11.12576 72.35072-0.00512-268.27776z m651.55584 540.59008c0 24.5248-7.07584 31.60064-31.60064 31.60064H189.5936c-24.5248 0-31.60064-7.07584-31.69792-30.42304l61.67552-314.48576c0-24.4992 7.10144-31.60064 31.54944-31.60064H834.4064c24.4736 0 31.57504 7.10144 31.67744 30.42304l-61.65504 314.48576z"  ></path></symbol><symbol id="icon-document" viewBox="0 0 1024 1024"><path d="M798.6 337.8c-1.4-5.8-4-10-7-13.6l-167.4-183.4c-3.8-4.2-8.2-6.2-13.2-8.8-5.8-3-12.2-3.2-18.8-3.2L272.4 128.8c-24.8 0-47.4 19.2-47.4 45.8l0 670.4c0 26.8 22.6 51.8 47.4 51.8l486.2 0c24.8 0 42.4-25 42.4-51.8L801 356.8C801 349.6 800.2 344.4 798.6 337.8zM611 222l116 127-116 0L611 222zM289 833l0-640 258 0 0 163.4c0 29.6 26.8 56.6 56.2 56.6l133.8 0 0 420L289 833z"  ></path></symbol><symbol id="icon-delete" viewBox="0 0 1024 1024"><path d="M784 288.96l-56.56-56.576L512.464 447.36 297.504 232.384l-56.56 56.576 214.96 214.96L240.96 718.896l56.56 56.56L512.464 560.48l214.976 214.976L784 718.88 569.04 503.92z" fill="#565D64" ></path></symbol><symbol id="icon-plus" viewBox="0 0 1024 1024"><path d="M576 64H448v384H64v128h384v384h128V576h384V448H576z" fill="#595959" ></path></symbol></svg>',i=(i=document.getElementsByTagName("script"))[i.length-1].getAttribute("data-injectcss");if(i&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(l){console&&console.log(l)}}function d(){o||(o=!0,a())}e=function(){var t,e;(e=document.createElement("div")).innerHTML=r,r=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",e=t,(t=document.body).firstChild?function(t,e){e.parentNode.insertBefore(t,e)}(e,t.firstChild):t.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(e,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),e()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(a=e,s=t.document,o=!1,function t(){try{s.documentElement.doScroll("left")}catch(l){return void setTimeout(t,50)}d()}(),s.onreadystatechange=function(){"complete"==s.readyState&&(s.onreadystatechange=null,d())})}(window);class e{constructor(){this.addClass=document.querySelector(".task-class-add-btn"),this.taskClassUl=document.querySelector(".task-class ul"),this.addTask=document.querySelector(".task-add-btn"),this.listOfAllTaskDate=document.querySelectorAll(".task-date"),this.taskList=document.querySelector(".task-list"),this.taskStatus=document.querySelector(".task-status")}renderTaskClass(){const e=document.querySelector(".task-class-wrap > div");e.textContent=e.textContent.replace(/\d/,(()=>{let t=0;const e=Object.keys(localStorage);for(const n of e)t+=JSON.parse(localStorage.getItem(n)).tasks.length;return t.toString()})());const n=this.taskClassUl;for(;n.firstChild;)n.removeChild(n.firstChild);for(let a=0;a<localStorage.length;a++){const e=localStorage.key(a),s=document.createElement("li"),o=document.createElement("span"),r=JSON.parse(localStorage.getItem(e)).tasks.length;o.textContent=e+`（${r}）`,s.setAttribute("data-taskClass",e),s.setAttribute("class","class-control");const i=document.createElement("div"),d=t("icon-folder"),l=t("icon-delete");"默认分类"===e?(i.append(d,o),s.classList.add("selected-class","default-class"),s.append(i),n.prepend(s)):(i.append(d,o,l),s.append(i),n.append(s))}}renderTaskList(){const t=this.taskList;for(;t.firstChild;)t.removeChild(t.firstChild);const e=document.querySelector(".selected-class");if(null!==e){const t=e.dataset.taskclass,n=JSON.parse(localStorage.getItem(t)),a=n.tasks.map((t=>t.date));Array.from(new Set(a)).sort(((t,e)=>{const n=t.split("-").map((t=>parseInt(t))),a=new Date(n[0],n[1]-1,n[2]),s=e.split("-").map((t=>parseInt(t)));return+a-+new Date(s[0],s[1]-1,s[2])})).forEach((t=>{const e=document.createElement("ul");e.classList.add("task-date"),e.setAttribute("data-taskdate",t);const n=document.createElement("div");n.textContent=t,e.append(n),this.taskList.append(e)}));const s=Array.from(document.querySelectorAll(".task-date"));n.tasks.forEach((t=>{const e=document.createElement("li");e.textContent=t.title,e.classList.add(t.status),s.forEach((n=>{t.date===n.dataset.taskdate&&n.append(e)}))}))}}}class n{constructor(){const{addClass:t,taskClassUl:n,taskList:a,renderTaskClass:s,renderTaskList:o}=new e;this.addClass=t,this.taskClassUl=n,this.taskClassObj={category:"",tasks:[]},this.taskList=a,this.eventBind(),this.renderTaskClass=s,this.renderTaskList=o}add(){(()=>{const t=document.createElement("div");t.innerHTML='\n    <div class="addplan-modal-wrap">\n      <div class="addplan-modal-content">\n        <button\n          class="addplan-modal-close"\n          type="button"\n          aria-label="close">\n          <span class="addplan-modal-close-icon">&#xe71f;</span>\n        </button>\n        <div class="addplan-modal-header">\n          <div class="addplan-modal-title">新增分类</div>\n        </div>\n        <form>\n          <div class="addplan-modal-body">\n            <div class="form-group">\n              <label>\n                <span class="form-group-title">标题</span>\n                <input\n                  type="text"\n                  class="task-class-input"\n                  name="plan-title"\n                  placeholder="请输入分类名称"\n                  required />\n              </label>\n            </div>\n          </div>\n          <div class="addplan-modal-footer">\n            <button\n              class="addplan-btn addplan-btn-cancel"\n              type="button">\n              <span>取 消</span>\n            </button>\n            <button class="addplan-btn addplan-btn-confirm" type="button">\n              <span>确 定</span>\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  ',document.body.append(t);const e=document.querySelector(".addplan-modal-wrap");e.style.display="block",document.querySelector(".addplan-modal-close").addEventListener("click",(function(){e.parentElement.remove()})),document.querySelector(".addplan-btn-cancel").addEventListener("click",(function(){e.parentElement.remove()})),e.addEventListener("click",(function(t){t.target===e&&e.parentElement.remove()}))})();document.querySelector(".addplan-btn-confirm").addEventListener("click",(()=>{const t=document.querySelector(".task-class-input"),e=t.value;if(!e)return void alert("输入不能为空");t.value="";const n=JSON.parse(JSON.stringify(this.taskClassObj));n.category=e,localStorage.setItem(e,JSON.stringify(n)),this.renderTaskClass()}))}delete(t){const e=t.target;if("DIV"===e.tagName||"SPAN"===e.tagName)return;const n=e.closest("svg");if(n.matches("svg.icon-delete")&&window.confirm("确定删除吗？")){const t=n.closest("li").getAttribute("data-taskClass");localStorage.removeItem(t)}this.renderTaskClass()}activate(t){const e=t.target.closest("li"),n=document.querySelector(".selected-class");null!==n&&n.classList.remove("selected-class"),e.classList.add("selected-class"),this.renderTaskList()}eventBind(){this.addClass.addEventListener("click",this.add.bind(this)),this.taskClassUl.addEventListener("click",this.delete.bind(this)),this.taskClassUl.addEventListener("click",this.activate.bind(this))}}function a(t){return t%100==0?t%400==0:t%4==0}class s{constructor(t,e="default"){t=null!=t?t:new Date,this.Date=t,this.date=t.getDate(),this.day=t.toLocaleString(e,{weekday:"long"}),this.dayNumber=t.getDay()+1,this.dayShort=t.toLocaleString(e,{weekday:"short"}),this.year=t.getFullYear(),this.yearShort=t.toLocaleString(e,{year:"2-digit"}),this.month=t.toLocaleString(e,{month:"long"}),this.monthShort=t.toLocaleString(e,{month:"short"}),this.monthNumber=t.getMonth()+1,this.timestamp=t.getTime(),this.week=function(t){const e=new Date(t.getFullYear(),0,1),n=(t.getTime()-e.getTime())/864e5;return Math.ceil((n+e.getDay()+1)/7)}(t)}get isToday(){return this.isEqualTo(new Date)}isEqualTo(t){return(t=t instanceof s?t.Date:t).getDate()===this.date&&t.getMonth()===this.monthNumber-1&&t.getFullYear()===this.year}format(t){return t.replace(/\bYYYY\b/,this.year.toString()).replace(/\bYYY\b/,this.yearShort).replace(/\bWW\b/,this.week.toString().padStart(2,"0")).replace(/\bW\b/,this.week.toString()).replace(/\bDDDD\b/,this.day).replace(/\bDDD\b/,this.dayShort).replace(/\bDD\b/,this.date.toString().padStart(2,"0")).replace(/\bD\b/,this.date.toString()).replace(/\bMMMM\b/,this.month).replace(/\bMMM\b/,this.monthShort).replace(/\bMM\b/,this.monthNumber.toString().padStart(2,"0")).replace(/\bM\b/,this.monthNumber.toString())}}class o{constructor(t,e="default"){const n=new s(t,e);this.lang=e,this.name=n.month,this.number=n.monthNumber,this.year=n.year,this.numberOfDays=[31,28,31,30,31,30,31,31,30,31,30,31][this.number-1],2===this.number&&(this.numberOfDays+=a(n.year)?1:0),this[Symbol.iterator]=function*(){let t=1;for(yield this.getDay(t);t<this.numberOfDays;)++t,yield this.getDay(t)}}getDay(t){return new s(new Date(this.year,this.number-1,t),this.lang)}}class r{constructor(t,e,n="default"){this.weekDays=Array.from({length:7}),this.today=new s(null,n),this.year=null!=t?t:this.today.year,this.month=new o(new Date(this.year,(e||this.today.monthNumber)-1),n),this.lang=n,this[Symbol.iterator]=function*(){let t=1;for(yield this.getMonth(t);t<12;)++t,yield this.getMonth(t)},this.weekDays.forEach(((t,e)=>{const n=this.month.getDay(e+1);this.weekDays.includes(n.day)||(this.weekDays[n.dayNumber-1]=n.day)}))}get isLeapYear(){return a(this.year)}getMonth(t){return new o(new Date(this.year,t-1),this.lang)}getPreviousMonth(){return 1===this.month.number?new o(new Date(this.year-1,11),this.lang):new o(new Date(this.year,this.month.number-2),this.lang)}getNextMonth(){return 12===this.month.number?new o(new Date(this.year+1,0),this.lang):new o(new Date(this.year,this.month.number+2),this.lang)}goToDate(t,e){this.month=new o(new Date(e,t-1),this.lang),this.year=e}goToNextYear(){this.year+=1,this.month=new o(new Date(this.year,0),this.lang)}goToPreviousYear(){this.year-=1,this.month=new o(new Date(this.year,11),this.lang)}goToNextMonth(){if(12===this.month.number)return this.goToNextYear();this.month=new o(new Date(this.year,this.month.number+1-1),this.lang)}goToPreviousMonth(){if(1===this.month.number)return this.goToPreviousYear();this.month=new o(new Date(this.year,this.month.number-1-1),this.lang)}}class i extends HTMLElement{constructor(){super(),this.format="MMM DD, YYYY",this.position="bottom",this.mounted=!1;const t=window.navigator.language,e=new Date(this.getAttribute("date")||Date.now());this.shadow=this.attachShadow({mode:"open"}),this.date=new s(e,t),this.calendar=new r(this.date.year,this.date.monthNumber,t),this.format=this.getAttribute("format")||this.format,this.position=i.position.includes(this.getAttribute("position"))?this.getAttribute("position"):this.position,this.render()}connectedCallback(){this.mounted=!0,this.toggleButton=this.shadow.querySelector(".date-toggle"),this.datePickerInput=this.shadow.querySelector(".date-toggle > input"),this.calendarDropDown=this.shadow.querySelector(".calendar-dropdown");const[t,e,n]=this.calendarDropDown.querySelector(".date-picker-header").children;this.calendarDateElement=e,this.calendarDaysContainer=this.calendarDropDown.querySelector(".month-days"),this.toggleButton.addEventListener("click",(()=>this.toggleCalendar())),t.addEventListener("click",(()=>this.prevMonth())),n.addEventListener("click",(()=>this.nextMonth())),document.addEventListener("click",(t=>this.handleClickOut(t))),this.renderCalendarDays()}attributeChangedCallback(t,e){if(this.mounted)switch(t){case"date":this.date=new s(new Date(e)),this.calendar.goToDate(this.date.monthNumber,this.date.year),this.renderCalendarDays(),this.updateToggleText();break;case"format":this.format=e,this.updateToggleText();break;case"position":this.position=i.position.includes(e)?e:this.position,this.calendarDropDown.className=`calendar-dropdown ${this.position}`}}toggleCalendar(){this.calendarDropDown.style.display="block"}handleClickOut(t){this!==t.target&&(this.calendarDropDown.style.display="none")}prevMonth(){this.calendar.goToPreviousMonth(),this.renderCalendarDays()}nextMonth(){this.calendar.goToNextMonth(),this.renderCalendarDays()}updateHeaderText(){this.calendarDateElement.textContent=`${this.calendar.year}年 ${this.calendar.month.number}月`;const t=`${this.calendar.year}年 ${this.calendar.month.number}月`;this.calendarDateElement.setAttribute("aria-label",`current month ${t}`)}isSelectedDate(t){return t.date===this.date.date&&t.monthNumber===this.date.monthNumber&&t.year===this.date.year}isCurrentCalendarMonth(){return this.calendar.month.number===this.date.monthNumber&&this.calendar.year===this.date.year}selectDay(t,e){this.date=e,e.monthNumber!==this.calendar.month.number?this.prevMonth():(t.classList.add("selected"),this.selectedDayElement.classList.remove("selected"),this.selectedDayElement=t),this.toggleCalendar(),this.updateToggleText(),this.calendarDropDown.style.display="none"}getWeekDaysElementStrings(){return this.calendar.weekDays.map((t=>`<span>${t.substring(2,3)}</span>`)).join("")}getMonthDaysGrid(){const t=this.calendar.month.getDay(1),e=this.calendar.getPreviousMonth(),n=t.dayNumber-1,a=this.calendar.month.numberOfDays+n,s=Array.from({length:a});for(let o=n;o<a;o++)s[o]=this.calendar.month.getDay(o+1-n);for(let o=0;o<n;o++){const t=n-(o+1);s[o]=e.getDay(e.numberOfDays-t)}return s}updateToggleText(){const t=this.date.format(this.format);this.datePickerInput.title=t,this.datePickerInput.value=t}updateMonthDays(){this.calendarDaysContainer.innerHTML="",this.getMonthDaysGrid().forEach((t=>{const e=document.createElement("button");e.className="month-day",e.textContent=t.date.toString(),e.addEventListener("click",(()=>this.selectDay(e,t))),e.setAttribute("aria-label",t.format(this.format)),t.monthNumber===this.calendar.month.number?e.classList.add("current"):e.classList.add("not-current"),this.isSelectedDate(t)&&(e.classList.add("selected"),this.selectedDayElement=e),this.calendarDaysContainer.appendChild(e)}))}renderCalendarDays(){this.updateHeaderText(),this.updateMonthDays(),this.calendarDateElement.focus()}static get observedAttributes(){return["date","format","position"]}static get position(){return["top","left","bottom","right"]}get datePickerStyle(){return"\n      *;\n      ::before;\n      ::after {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      :host {\n        position: relative;\n        font-family: sans-serif;\n      }\n     \n      .date-toggle {\n        width: 176px;\n        display: inline-flex;\n        align-items: center;\n        position: relative;\n        color: #000000d9;\n        padding: 4px 11px;\n        line-height: 1.5;\n        background: #fff;\n        border: 1px solid #d9d9d9;\n        border-radius: 2px;\n        transition: border 0.3s, box-shadow 0.3s;\n      }\n      \n      .date-toggle:hover {\n        border-color: #7db35e;\n      }\n\n      .date-toggle:focus-within {\n        border-color: #7db35e;\n        outline: 0;\n        box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),\n          0 0 4px rgb(125, 179, 94, 0.8); \n      }\n\n      .date-toggle > input {\n        width: 100%;\n        position: relative;\n        font-size: 14px;\n        line-height: 1.5;\n        background-color: #fff;\n        transition: all .3s;\n        background: 0 0;\n        border: 0;\n      }\n\n      .date-toggle > input:focus {\n        border-color: #7db35e;\n        outline: 0;\n      }\n\n      .date-toggle > input::placeholder {\n        color: #bfbfbf;\n        opacity: 1;\n      }\n\n      .date-picker-suffix {\n        align-self: center;\n        margin-left: 4px;\n        color: #00000040;\n        line-height: 1;\n      }\n\n      .calendar-dropdown {\n        z-index: 2;\n        display: none;\n        width: 280px;\n        position: absolute;\n        top: 100%;\n        left: 50%;\n        transform: translate(-50%, 8px);\n        background: #fff;\n        border-radius: 5px;\n        box-shadow: 0 0 8px rgba(0,0,0,0.2);\n      }\n      \n      .calendar-dropdown.top {\n        top: auto;\n        bottom: 100%;\n        transform: translate(-50%, -8px);\n      }\n      \n      .calendar-dropdown.left {\n        top: 50%;\n        left: 0;\n        transform: translate(calc(-8px + -100%), -50%);\n      }\n      \n      .calendar-dropdown.right {\n        top: 50%;\n        left: 100%;\n        transform: translate(8px, -50%);\n      }\n      \n      .date-picker-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0 8px;\n        border-bottom: 1px solid #f0f0f0;\n      }\n      \n      .date-picker-header h4 {\n        margin: 0;\n        text-transform: capitalize;\n        font-size: 16px;\n        font-weight: normal;\n        line-height: 40px;\n      }\n      \n      .date-picker-header button {\n        padding: 0;\n        border: 8px solid transparent;\n        width: 0;\n        height: 0;\n        border-radius: 2px;\n        border-top-color: #333;\n        transform: rotate(90deg);\n        cursor: pointer;\n        background: none;\n        position: relative;\n      }\n      \n      .date-picker-header button::after {\n        content: '';\n        display: block;\n        width: 25px;\n        height: 25px;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n      }\n      \n      .date-picker-header button:last-of-type {\n        transform: rotate(-90deg);\n      }\n    \n      .date-picker-body {\n        padding: 8px 12px;\n      }\n\n      .week-days {\n        display: grid;\n        grid-template-columns: repeat(7, 1fr);\n        grid-gap: 5px;\n        margin-bottom: 2px;\n      }\n      \n      .week-days span {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 14px;\n        line-height: 28px;\n        text-transform: capitalize;\n      }\n      \n      .month-days {\n        display: grid;\n        grid-template-columns: repeat(7, 1fr);\n        grid-gap: 4px;\n      }\n      \n      .month-day {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background-color: transparent;\n        padding: 8px 6px;\n        color: #000;\n        font-size: 14px;\n        border-radius: 2px;\n        cursor: pointer;\n        border: none;\n      }\n      \n      .month-day.current {\n        background-color: transparent;\n      }\n\n      .month-day.not-current {\n        color: #00000040;\n      }\n      \n      .month-day.selected {\n        background: #8DC26F;\n        color: #ffffff;\n      }\n      \n      .month-day:hover {\n        background: #e9e9e9;\n      }\n    "}render(){const t=`${this.calendar.year}年 ${this.calendar.month.number}月`;this.shadow.innerHTML=`\n      <style>${this.datePickerStyle}</style>\n      <div class="date-toggle">\n        <input placeholder="请选择日期" title="" autocomplete="off" />\n        <span class="date-picker-suffix">\n          <svg viewBox="64 64 896 896" class="icon-calendar" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n            <path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"></path>\n          </svg>\n        </span>\n      </div>\n      <div class="calendar-dropdown ${this.position}">\n        <div class="date-picker-header">\n          <button type="button" class="prev-month" aria-label="previous month"></button>\n          <h4 tabindex="0" aria-label="current month ${t}">\n            ${t}\n          </h4>\n          <button type="button" class="prev-month" aria-label="next month"></button>\n        </div>\n        <div class="date-picker-body">\n          <div class="week-days">${this.getWeekDaysElementStrings()}</div>\n          <div class="month-days"></div>\n        </div>\n      </div>\n    `}}customElements.define("date-picker",i);class d{constructor(){const{taskClassUl:t,addTask:n,listOfAllTaskDate:a,taskList:s,taskStatus:o,renderTaskClass:r,renderTaskList:i}=new e;this.taskClassUl=t,this.addTask=n,this.listOfAllTaskDate=a,this.taskList=s,this.taskStatus=o,this.task={title:"",date:"",content:"",status:"uncompleted"},this.eventBind(),this.renderTaskClass=r,this.renderTaskList=i}add(){(()=>{const t=document.createElement("div");t.innerHTML='\n    <div class="addtodo-modal-wrap">\n      <div class="addtodo-modal-content">\n        <button\n          class="addtodo-modal-close"\n          type="button"\n          aria-label="close"\n        >\n          <span class="addtodo-modal-close-icon">&#xe71f;</span>\n        </button>\n        <div class="addtodo-modal-header">\n          <div class="addtodo-modal-title">新增任务</div>\n        </div>\n        <form>\n          <div class="addtodo-modal-body">\n            <div class="form-group">\n              <label>\n                <span>标题</span>\n                <input\n                  type="text"\n                  class="form-input"\n                  name="todo-title"\n                  value=""\n                  placeholder="请输入待办标题"\n                  required\n                />\n              </label>\n            </div>\n            <div class="form-group">\n              <span>日期</span>\n              <date-picker format="YYYY-MM-DD"></date-picker>\n            </div>\n            <div class="form-group form-textarea-wrap">\n              <label>\n                <span>内容</span>\n                <textarea\n                  class="form-input form-textarea"\n                  name="todo-description"\n                  placeholder="请输入待办内容"\n                  row="5"\n                  cols="10"\n                  required\n                ></textarea>\n              </label>\n            </div>\n          </div>\n          <div class="addtodo-modal-footer">\n            <button\n              class="addtodo-btn addtodo-btn-cancel"\n              type="button"\n            >\n              <span>取 消</span>\n            </button>\n            <button class="addtodo-btn addtodo-btn-confirm" type="button">\n              <span>确 定</span>\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  ',document.body.append(t);const e=document.querySelector(".addtodo-modal-wrap");e.style.display="block",document.querySelector(".addtodo-modal-close").addEventListener("click",(function(){e.parentElement.remove()})),document.querySelector(".addtodo-btn-cancel").addEventListener("click",(function(){e.parentElement.remove()})),e.addEventListener("click",(function(t){t.target===e&&e.parentElement.remove()}))})();document.querySelector(".addtodo-btn-confirm").addEventListener("click",(()=>{const t=document.querySelector('input[name="todo-title"]'),e=document.querySelector(".form-textarea"),n=document.querySelector("date-picker"),a=JSON.parse(JSON.stringify(this.task));a.title=t.value,a.content=e.value,a.date=n.datePickerInput.value;const s=document.querySelector(".selected-class").dataset.taskclass,o=JSON.parse(localStorage.getItem(s));o.tasks.push(a),localStorage.setItem(s,JSON.stringify(o)),this.renderTaskClass(),this.renderTaskList()}))}filterByComplete(t){const e=t.target;if("SPAN"!==e.tagName)return;if(e.classList.contains("selected-status"))return;e.parentElement.querySelector(".selected-status").classList.remove("selected-status"),e.classList.add("selected-status");const n=Array.from(this.taskList.querySelectorAll(".completed")),a=Array.from(this.taskList.querySelectorAll(".uncompleted")),s=Array.from(this.taskList.querySelectorAll("li"));switch(e.innerText){case"所有":s.forEach((t=>{t.style.display="block"}));break;case"未完成":n.forEach((t=>{t.style.display="none"})),a.forEach((t=>{t.style.display="block"}));break;case"已完成":n.forEach((t=>{t.style.display="block"})),a.forEach((t=>{t.style.display="none"}))}}sortByDate(){console.log(this.listOfAllTaskDate);const t=Array.from(this.listOfAllTaskDate);t.sort((function(t,e){const n=t.querySelector("div").innerHTML.split("-").map((t=>parseInt(t))),a=new Date(n[0],n[1]-1,n[2]),s=e.querySelector("div").innerHTML.split("-").map((t=>parseInt(t)));return+a-+new Date(s[0],s[1]-1,s[2])})),this.taskList.append(...t)}eventBind(){this.addTask.addEventListener("click",this.add.bind(this)),this.taskStatus.addEventListener("click",this.filterByComplete.bind(this))}}window.onload=function(){if(!localStorage.getItem("默认分类")){const t={category:"",tasks:[]};localStorage.setItem("默认分类",JSON.stringify(t))}new n,new d;const t=new e;t.renderTaskClass(),t.renderTaskList()};
